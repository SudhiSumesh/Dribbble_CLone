import{a as p,b as f}from"./axios_helper-9007d790.js";import{I as d}from"./internal-tracking-4280230d.js";import"./_commonjsHelpers-39b5b250.js";const b="modulepreload",_=function(o){return"/assets/vite/"+o},u={},m=function(e,r,i){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(t=>{if(t=_(t),t in u)return;u[t]=!0;const n=t.endsWith(".css"),g=n?'[rel="stylesheet"]':"";if(!!i)for(let c=s.length-1;c>=0;c--){const l=s[c];if(l.href===t&&(!n||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${g}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":b,n||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),n)return new Promise((c,l)=>{a.addEventListener("load",c),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>e())},h={provider:"Dribbble",unit_type:"Boosted Shots"};class k{constructor({requestId:e,searchData:r,viewData:i,injectElementCallback:s,placement:t}){if(!e||!r||!i||!s||!t)throw new Error("BoostedShot constructor missing required parameters.");this.requestId=e,this.searchData=r,this.viewData=i,this.placement=t,this.itlyTrackingEventProperties=this.getItlyTrackingEventProperties(),[this.element,this.pagePosition=0]=s(i),this.element&&(d.trackAdServed(this.itlyTrackingEventProperties),this.bindAdEvents())}getItlyTrackingEventProperties(){let e;switch(this.searchData.adLinkType){case"shot-page":e="Shot";break;case"profile":e="Profile";break;default:e="Custom URL"}return{...h,impression_id:this.requestId,placement:this.placement,ad_id:this.searchData.adId.toString(),ad_link:this.searchData.adLink,ad_link_type:e,ad_text:this.searchData.adText||"",has_cta:!1}}bindAdEvents(){this.element.addEventListener("click",()=>{d.trackAdClicked(this.itlyTrackingEventProperties),p.get("/screenshot_boost/click",{params:{id:this.searchData.adId,request_source:this.placement}},f())})}}class v{constructor({placement:e,numberOfBoosts:r,injectElementCallback:i,params:s={}}){this.placement=e,this.numberOfBoosts=r,this.injectElementCallback=i,this.params=s,this.currentPage=0,this.servedShotIds=[]}async fetchNext(){const e=[];this.currentPage++;for(let r=0;r<this.numberOfBoosts;r++){const i=crypto.randomUUID();e.push(i);const s={...h,placement:this.placement,impression_id:i};d.trackAdRequested(s)}await p.get("/screenshot_boost?render_in_list=true&use_generic_ui=true",{params:{original_params:this.params,served_shot_ids:this.servedShotIds,request_source:this.placement,number_of_boosts:this.numberOfBoosts,current_page:this.currentPage}}).then(r=>{r.data.data.forEach(({searchData:s,viewData:t},n)=>{this.servedShotIds.push(s.screenshotId),new k({requestId:e[n],searchData:s,viewData:t,injectElementCallback:this.injectElementCallback,placement:this.placement})})}).catch(()=>{d.trackAdRequestFailed({...h,placement:this.placement,reason:"No boosted shots available.",impression_id:e[0]})})}}const y=async()=>{try{const{gsap:o}=await m(()=>import("./index-e199721a.js"),[]),{ScrollTrigger:e}=await m(()=>import("./ScrollTrigger-6c1fce72.js"),[]);o.registerPlugin(e),e.config({ignoreMobileResize:!0}),o.to("[data-artist-card]",{yPercent:-80,ease:"none",scrollTrigger:{start:"top bottom",end:"bottom -80%",trigger:"[data-artist-card]",scrub:!0}})}catch(o){console.warn("gsap not loaded",o)}},E=()=>{let o=!1;const e=document.querySelector("[data-quality-media-boosted]");if(!e)return;const r=new v({placement:"Popular Feed First",numberOfBoosts:1,injectElementCallback:s=>(e.innerHTML="",e.insertAdjacentHTML("afterbegin",s),[e.querySelector("[data-boosted-shot-generic]"),3])});new IntersectionObserver(s=>{s.forEach(t=>{t.isIntersecting&&!o&&(o=!0,r.fetchNext())})},{threshold:0,rootMargin:"900px"}).observe(e)};window.addEventListener("DOMContentLoaded",async()=>{y(),E()});
//# sourceMappingURL=welcome-7ce0a50c.js.map
